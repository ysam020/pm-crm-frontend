"use strict";(self.webpackChunkpaymaster_crm=self.webpackChunkpaymaster_crm||[]).push([[9844],{3557:(e,s,r)=>{r.d(s,{A:()=>m});var o=r(9950),a=r(9254),n=r(226),t=r(6639),i=r(5112),d=r(4414);const l={margin:0,width:20,height:20,marginRight:10,color:"#fff"};function c(e){const{theme:s}=o.useContext(i.D),r=(0,a.Ay)(n.A)({backgroundColor:"light"===s?"#111b21":"#0c3f61",color:"#fff",padding:"8px 20px",cursor:"pointer",boxShadow:"0 0 20px 1px rgba(0, 0, 0, 0.3)",borderRadius:"8px",marginTop:"10px",textTransform:"none",fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:hover":{backgroundColor:"light"===s?"#111b21":"#0c3f61",boxShadow:"0 0 20px 1px rgba(0, 0, 0, 0.3)"}});return(0,d.jsx)(r,{startIcon:e.isSubmitting?(0,d.jsx)(o.Suspense,{fallback:(0,d.jsx)(t.A,{style:l}),children:(0,d.jsx)(t.A,{style:l})}):null,type:"submit",disableRipple:!0,variant:"contained",disabled:e.isSubmitting,children:e.name})}const m=o.memo(c)},9844:(e,s,r)=>{r.r(s),r.d(s,{default:()=>g});var o=r(9950),a=r(3939),n=r(4019),t=r(6106),i=r(9714);const d=i.Ik({otp:i.Yj().required("OTP is required").length(6,"OTP must be exactly 6 digits"),password:i.Yj().required("Password is required"),confirmPassword:i.Yj().oneOf([i.KR("password"),null],"Passwords must match").required("Confirm Password is required")});var l=r(3557),c=r(9845),m=r(3785),u=r(4414);function p(e){const{setAlert:s}=(0,o.useContext)(c.C);(0,o.useEffect)((()=>{!async function(){try{var r;const o=await m.A.post("/send-forgot-password-otp",{username:e.username});s({open:!0,message:null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message,severity:"success"})}catch(n){var o,a;s({open:!0,message:null===n||void 0===n||null===(o=n.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.message,severity:"error"})}}()}),[e.username]);const r=(0,a.Wx)({initialValues:{otp:"",password:"",confirmPassword:""},validationSchema:d,onSubmit:async r=>{try{const o=await m.A.put("/update-password",{username:e.username,otp:r.otp,password:r.password});s({open:!0,message:o.data.message,severity:"success"}),"Password has been successfully reset"===o.data.message&&e.setForgotPassword(!1)}catch(a){var o;null!==a&&void 0!==a&&a.response&&400===(null===a||void 0===a||null===(o=a.response)||void 0===o?void 0:o.status)?s({open:!0,message:a.response.data.message,severity:"error"}):s({open:!0,message:"An unexpected error occurred. Please try again later.",severity:"error"})}}});return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("form",{onSubmit:r.handleSubmit,children:[(0,u.jsx)("span",{style:{color:"#0060ae",fontWeight:800,fontSize:"14px"},children:"Enter OTP"}),(0,u.jsx)(n.o,{placeholder:"Enter OTP",value:r.values.otp,onChange:e=>r.setFieldValue("otp",e.value),mask:!0,integerOnly:!0,length:6}),r.touched.otp&&r.errors.otp&&(0,u.jsx)("small",{className:"p-error",children:r.errors.otp}),(0,u.jsx)(t._,{toggleMask:!0,id:"password",name:"password",placeholder:"New Password",value:r.values.password,onChange:r.handleChange,className:r.touched.password&&r.errors.password?"p-invalid":"",feedback:!1}),r.touched.password&&r.errors.password&&(0,u.jsx)("small",{className:"p-error",children:r.errors.password}),(0,u.jsx)(t._,{toggleMask:!0,id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm Password",value:r.values.confirmPassword,onChange:r.handleChange,className:r.touched.confirmPassword&&r.errors.confirmPassword?"p-invalid":"",feedback:!1}),r.touched.confirmPassword&&r.errors.confirmPassword&&(0,u.jsx)("small",{className:"p-error",children:r.errors.confirmPassword}),(0,u.jsx)("br",{}),(0,u.jsx)(l.A,{isSubmitting:r.isSubmitting,name:"Confirm"})]})})}const g=o.memo(p)}}]);