"use strict";(self.webpackChunkpaymaster_crm=self.webpackChunkpaymaster_crm||[]).push([[8994],{8994:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var n=s(9950),a=s(3235),i=s(4414);const c=(0,a.A)([(0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,i.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");var r=s(9845),d=s(2917),o=s(3785);const l=n.lazy((()=>s.e(6632).then(s.bind(s,6632))));function u(){const[e,t]=(0,n.useState)([]),[a,u]=(0,n.useState)(""),[h,x]=(0,n.useState)(""),[m,j]=(0,n.useState)(!0),f=new Date,[p,v]=(0,n.useState)(f.getMonth()),[g,y]=(0,n.useState)(f.getFullYear()),{setAlert:b}=(0,n.useContext)(r.C);async function w(){j(!0);try{const e=await o.A.get(`/get-attendances/${p+1}/${g}`,{withCredentials:!0});t(e.data)}catch(n){var e,s;console.error((null===(e=n.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||n.message)}finally{j(!1)}}(0,n.useEffect)((()=>{w()}),[p,g]);const S=(0,n.useMemo)((()=>e),[e]),C=(0,n.useMemo)((()=>{const e=(new Date).setHours(0,0,0,0);return S.find((t=>new Date(t.date).setHours(0,0,0,0)===e))}),[S]);(0,n.useEffect)((()=>{C&&(u(C.timeIn),x(C.timeOut))}),[C]);const M=(0,n.useMemo)((()=>({timeIn:!!a,timeOut:!!h})),[a,h]),k=async e=>{const{addAttendance:t}=await s.e(7939).then(s.bind(s,7939));t(e,b,w)};return(0,i.jsxs)("div",{className:"dashboard-container mark-attendance",children:[(0,i.jsx)("h2",{children:(0,i.jsx)("strong",{children:"My Attendances"})}),(0,i.jsxs)("div",{className:"flex-div",children:[(0,i.jsxs)("div",{style:{flex:1},children:[!M.timeIn&&(0,i.jsxs)("button",{onClick:()=>k("timeIn"),className:"btn",children:[(0,i.jsx)(c,{sx:{fontSize:"20px",marginRight:"5px"}}),"Punch In"]}),M.timeIn&&!M.timeOut&&(0,i.jsxs)("button",{onClick:()=>k("timeOut"),className:"btn",children:[(0,i.jsx)(c,{sx:{fontSize:"20px",marginRight:"5px"}}),"Punch Out"]})]}),(0,i.jsxs)("div",{children:[m?(0,i.jsx)(d.A,{variant:"text",width:100}):(0,i.jsxs)("p",{children:[(0,i.jsx)("br",{}),(0,i.jsx)("strong",{children:"Time In:"})," ",a||"Not recorded yet"]}),m?(0,i.jsx)(d.A,{variant:"text",width:100}):(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Time Out:"})," ",h||"Not recorded yet"]})]})]}),(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)("div",{children:"Loading..."}),children:(0,i.jsx)(l,{attendances:S,month:p,setMonth:v,year:g,setYear:y,currentDate:f})})]})}const h=n.memo(u)}}]);