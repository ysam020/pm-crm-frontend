"use strict";(self.webpackChunkpaymaster_crm=self.webpackChunkpaymaster_crm||[]).push([[4424],{4424:(e,t,r)=>{r.r(t),r.d(t,{default:()=>J});var a=r(9950),n=r(2004),o=r(3505),s=r(237),i=r(8465),l=r(9254),c=r(8463),d=r(4857);const u=a.createContext();var p=r(1763),m=r(423);function g(e){return(0,m.Ay)("MuiGrid",e)}const h=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],f=(0,p.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...h.map((e=>`grid-xs-${e}`)),...h.map((e=>`grid-sm-${e}`)),...h.map((e=>`grid-md-${e}`)),...h.map((e=>`grid-lg-${e}`)),...h.map((e=>`grid-xl-${e}`))]);var b=r(4414);function v(e){let{breakpoints:t,values:r}=e,a="";Object.keys(r).forEach((e=>{""===a&&0!==r[e]&&(a=e)}));const n=Object.keys(t).sort(((e,r)=>t[e]-t[r]));return n.slice(0,n.indexOf(a))}const x=(0,l.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{container:a,direction:n,item:o,spacing:s,wrap:i,zeroMinWidth:l,breakpoints:c}=r;let d=[];a&&(d=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[r[`spacing-xs-${String(e)}`]];const a=[];return t.forEach((t=>{const n=e[t];Number(n)>0&&a.push(r[`spacing-${t}-${String(n)}`])})),a}(s,c,t));const u=[];return c.forEach((e=>{const a=r[e];a&&u.push(t[`grid-${e}-${String(a)}`])})),[t.root,a&&t.container,o&&t.item,l&&t.zeroMinWidth,...d,"row"!==n&&t[`direction-xs-${String(n)}`],"wrap"!==i&&t[`wrap-xs-${String(i)}`],...u]}})((e=>{let{ownerState:t}=e;return{boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...t.item&&{margin:0},...t.zeroMinWidth&&{minWidth:0},..."wrap"!==t.wrap&&{flexWrap:t.wrap}}}),(function(e){let{theme:t,ownerState:r}=e;const a=(0,o.kW)({values:r.direction,breakpoints:t.breakpoints.values});return(0,o.NI)({theme:t},a,(e=>{const t={flexDirection:e};return e.startsWith("column")&&(t[`& > .${f.item}`]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:r}=e;const{container:a,rowSpacing:n}=r;let s={};if(a&&0!==n){const e=(0,o.kW)({values:n,breakpoints:t.breakpoints.values});let r;"object"===typeof e&&(r=v({breakpoints:t.breakpoints.values,values:e})),s=(0,o.NI)({theme:t},e,((e,a)=>{const n=t.spacing(e);return"0px"!==n?{marginTop:`calc(-1 * ${n})`,[`& > .${f.item}`]:{paddingTop:n}}:r?.includes(a)?{}:{marginTop:0,[`& > .${f.item}`]:{paddingTop:0}}}))}return s}),(function(e){let{theme:t,ownerState:r}=e;const{container:a,columnSpacing:n}=r;let s={};if(a&&0!==n){const e=(0,o.kW)({values:n,breakpoints:t.breakpoints.values});let r;"object"===typeof e&&(r=v({breakpoints:t.breakpoints.values,values:e})),s=(0,o.NI)({theme:t},e,((e,a)=>{const n=t.spacing(e);if("0px"!==n){return{width:`calc(100% + ${n})`,marginLeft:`calc(-1 * ${n})`,[`& > .${f.item}`]:{paddingLeft:n}}}return r?.includes(a)?{}:{width:"100%",marginLeft:0,[`& > .${f.item}`]:{paddingLeft:0}}}))}return s}),(function(e){let t,{theme:r,ownerState:a}=e;return r.breakpoints.keys.reduce(((e,n)=>{let s={};if(a[n]&&(t=a[n]),!t)return e;if(!0===t)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const i=(0,o.kW)({values:a.columns,breakpoints:r.breakpoints.values}),l="object"===typeof i?i[n]:i;if(void 0===l||null===l)return e;const c=Math.round(t/l*1e8)/1e6+"%";let d={};if(a.container&&a.item&&0!==a.columnSpacing){const e=r.spacing(a.columnSpacing);if("0px"!==e){const t=`calc(${c} + ${e})`;d={flexBasis:t,maxWidth:t}}}s={flexBasis:c,flexGrow:0,maxWidth:c,...d}}return 0===r.breakpoints.values[n]?Object.assign(e,s):e[r.breakpoints.up(n)]=s,e}),{})}));const y=e=>{const{classes:t,container:r,direction:a,item:n,spacing:o,wrap:s,zeroMinWidth:l,breakpoints:c}=e;let d=[];r&&(d=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[`spacing-xs-${String(e)}`];const r=[];return t.forEach((t=>{const a=e[t];if(Number(a)>0){const e=`spacing-${t}-${String(a)}`;r.push(e)}})),r}(o,c));const u=[];c.forEach((t=>{const r=e[t];r&&u.push(`grid-${t}-${String(r)}`)}));const p={root:["root",r&&"container",n&&"item",l&&"zeroMinWidth",...d,"row"!==a&&`direction-xs-${String(a)}`,"wrap"!==s&&`wrap-xs-${String(s)}`,...u]};return(0,i.A)(p,g,t)},w=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiGrid"}),{breakpoints:o}=(0,d.A)(),i=(0,s.A)(r),{className:l,columns:p,columnSpacing:m,component:g="div",container:h=!1,direction:f="row",item:v=!1,rowSpacing:w,spacing:A=0,wrap:$="wrap",zeroMinWidth:k=!1,...S}=i,C=w||A,j=m||A,M=a.useContext(u),N=h?p||12:M,W={},R={...S};o.keys.forEach((e=>{null!=S[e]&&(W[e]=S[e],delete R[e])}));const I={...i,columns:N,container:h,direction:f,item:v,rowSpacing:C,columnSpacing:j,wrap:$,zeroMinWidth:k,spacing:A,...W,breakpoints:o.keys},O=y(I);return(0,b.jsx)(u.Provider,{value:N,children:(0,b.jsx)(x,{ownerState:I,className:(0,n.A)(O.root,l),as:g,ref:t,...R})})}));const A=w;var $=r(249),k=r(693);function S(e){return(0,m.Ay)("MuiCard",e)}(0,p.A)("MuiCard",["root"]);const C=(0,l.Ay)(k.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),j=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiCard"}),{className:a,raised:o=!1,...s}=r,l={...r,raised:o},d=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},S,t)})(l);return(0,b.jsx)(C,{className:(0,n.A)(d.root,a),elevation:o?8:void 0,ref:t,ownerState:l,...s})}));var M=r(7569),N=r(7233);function W(e){return(0,m.Ay)("MuiCardHeader",e)}const R=(0,p.A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),I=(0,l.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>[{[`& .${R.title}`]:t.title},{[`& .${R.subheader}`]:t.subheader},t.root]})({display:"flex",alignItems:"center",padding:16}),O=(0,l.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),G=(0,l.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),T=(0,l.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto",[`.${M.A.root}:where(& .${R.title})`]:{display:"block"},[`.${M.A.root}:where(& .${R.subheader})`]:{display:"block"}}),z=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiCardHeader"}),{action:a,avatar:o,className:s,component:l="div",disableTypography:d=!1,subheader:u,subheaderTypographyProps:p,title:m,titleTypographyProps:g,...h}=r,f={...r,component:l,disableTypography:d},v=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},W,t)})(f);let x=m;null==x||x.type===N.A||d||(x=(0,b.jsx)(N.A,{variant:o?"body2":"h5",className:v.title,component:"span",...g,children:x}));let y=u;return null==y||y.type===N.A||d||(y=(0,b.jsx)(N.A,{variant:o?"body2":"body1",className:v.subheader,color:"textSecondary",component:"span",...p,children:y})),(0,b.jsxs)(I,{className:(0,n.A)(v.root,s),as:l,ref:t,ownerState:f,...h,children:[o&&(0,b.jsx)(O,{className:v.avatar,ownerState:f,children:o}),(0,b.jsxs)(T,{className:v.content,ownerState:f,children:[x,y]}),a&&(0,b.jsx)(G,{className:v.action,ownerState:f,children:a})]})}));var B=r(7357),E=r(3563),H=r(4195),L=r(3038),P=r(226),V=r(4745),F=r(3987),X=r(2436),D=r(3785),_=r(9845);function U(e,t){return e.filter((e=>!t.includes(e)))}function Y(e,t){return e.filter((e=>t.includes(e)))}function q(e){let{selectedUser:t}=e;const[n,o]=(0,a.useState)([]),[s,i]=(0,a.useState)([]),{user:l}=(0,a.useContext)(X.R),{setAlert:c}=(0,a.useContext)(_.C),d=(0,a.useMemo)((()=>(0,F.A)(l)),[l]),u=(0,a.useMemo)((()=>d.filter((e=>!e.canBeAssigned)).map((e=>e.name))),[d]),p=(0,a.useMemo)((()=>d.map((e=>e.name)).filter((e=>!u.includes(e)))),[d,u]),[m,g]=(0,a.useState)([]);(0,a.useEffect)((()=>{!async function(){if(t)try{const e=await(0,D.A)(`/get-user-modules/${t}`);i(e.data.modules),g(p.filter((t=>!e.data.modules.includes(t))))}catch(e){console.error("Error fetching user modules:",e)}else g([]),i([])}()}),[t,p]);const h=(0,a.useMemo)((()=>Y(n,m)),[n,m]),f=(0,a.useMemo)((()=>Y(n,s)),[n,s]),v=e=>async()=>{const{handleToggle:t}=await r.e(7159).then(r.bind(r,7159));t(e,n,o)},x=e=>async()=>{const{handleToggleAll:t}=await r.e(8712).then(r.bind(r,8712));t(e,n,o)},y=(e,t)=>(0,b.jsxs)(j,{children:[(0,b.jsx)(z,{sx:{px:2},avatar:(0,b.jsx)(L.A,{onClick:x(t),checked:t.length>0&&Y(n,t).length===t.length,indeterminate:Y(n,t).length>0&&Y(n,t).length!==t.length,disabled:0===t.length,inputProps:{"aria-label":"all items selected"}}),title:e,subheader:`${Y(n,t).length}/${t.length} selected`}),(0,b.jsx)(V.A,{}),(0,b.jsx)($.A,{sx:{width:400,height:550,bgcolor:"background.paper",overflow:"auto"},dense:!0,children:t.map((e=>(0,b.jsxs)(B.A,{onClick:v(e),children:[(0,b.jsx)(H.A,{children:(0,b.jsx)(L.A,{sx:{color:"#000"},checked:n.includes(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":`label-${e}`}})}),(0,b.jsx)(E.A,{id:`label-${e}`,primary:e})]},e)))})]});return(0,b.jsxs)(A,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[(0,b.jsx)(A,{item:!0,children:y("Available Modules",m)}),(0,b.jsx)(A,{item:!0,children:(0,b.jsxs)(A,{container:!0,direction:"column",alignItems:"center",children:[(0,b.jsx)(P.A,{sx:{my:.5},variant:"outlined",size:"small",onClick:async()=>{i((e=>[...e,...h].sort())),g((e=>U(e,h).sort())),o((e=>U(e,h)));try{await D.A.put("/assign-modules",{modules:h,username:t})}catch(a){var e,r;c({open:!0,message:"Network Error"===a.message?"Network Error, your details will be submitted when you are back online":(null===(e=a.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"An error occurred",severity:"error"})}},disabled:0===h.length,children:">"}),(0,b.jsx)(P.A,{sx:{my:.5},variant:"outlined",size:"small",onClick:async()=>{g((e=>[...e,...f].sort())),i((e=>U(e,f).sort())),o((e=>U(e,f)));try{await D.A.put("/unassign-modules",{modules:f,username:t})}catch(e){console.error("Error occurred while unassigning modules:",e)}},disabled:0===f.length,children:"<"})]})}),(0,b.jsx)(A,{item:!0,children:y("Assigned Modules",s)})]})}const J=a.memo(q)},7357:(e,t,r)=>{r.d(t,{A:()=>v});var a=r(9950),n=r(2004),o=r(8465),s=r(3933),i=r(9254),l=r(4265),c=r(8463),d=r(9608),u=r(1923),p=r(9044),m=r(1506),g=r(3372),h=r(9813),f=r(4414);const b=(0,i.Ay)(u.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,"flex-start"===r.alignItems&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})((0,l.A)((e=>{let{theme:t}=e;return{display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.A.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,s.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${h.A.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,s.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${h.A.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,s.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,s.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${h.A.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${h.A.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{paddingTop:4,paddingBottom:4}}]}}))),v=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiListItemButton"}),{alignItems:s="center",autoFocus:i=!1,component:l="div",children:d,dense:u=!1,disableGutters:v=!1,divider:x=!1,focusVisibleClassName:y,selected:w=!1,className:A,...$}=r,k=a.useContext(g.A),S=a.useMemo((()=>({dense:u||k.dense||!1,alignItems:s,disableGutters:v})),[s,k.dense,u,v]),C=a.useRef(null);(0,p.A)((()=>{i&&C.current&&C.current.focus()}),[i]);const j={...r,alignItems:s,dense:S.dense,disableGutters:v,divider:x,selected:w},M=(e=>{const{alignItems:t,classes:r,dense:a,disabled:n,disableGutters:s,divider:i,selected:l}=e,c={root:["root",a&&"dense",!s&&"gutters",i&&"divider",n&&"disabled","flex-start"===t&&"alignItemsFlexStart",l&&"selected"]},d=(0,o.A)(c,h.Y,r);return{...r,...d}})(j),N=(0,m.A)(C,t);return(0,f.jsx)(g.A.Provider,{value:S,children:(0,f.jsx)(b,{ref:N,href:$.href||$.to,component:($.href||$.to)&&"div"===l?"button":l,focusVisibleClassName:(0,n.A)(M.focusVisible,y),ownerState:j,className:(0,n.A)(M.root,A),...$,classes:M,children:d})})}))}}]);