"use strict";(self.webpackChunkpaymaster_crm=self.webpackChunkpaymaster_crm||[]).push([[8165],{8165:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var s=n(9950),r=n(5333),o=n(8008),a=n(2934),i=n(8992),c=n(3939),l=n(3785),u=n(9845),d=n(4414);function h(){const{setAlert:e}=(0,s.useContext)(u.C),t=(0,s.useRef)(null),n=(0,c.Wx)({initialValues:{content:"<h3>Note</h3>"},onSubmit:async t=>{try{const n=await l.A.post("/add-sticky-note",{note:t.content});e({open:!0,message:n.data.message,severity:"success"})}catch(n){e({open:!0,message:"Network Error"===n.message?"Network Error, your details will be submitted when you are back online":n.response.data.message,severity:"error"})}}}),h=(0,s.useMemo)((()=>((async()=>{try{const e=await l.A.get("/get-sticky-note",{withCredentials:!0});return e.data?e.data:"<h3>Note</h3>"}catch(e){return console.error("Error fetching content:",e),"<h3>Note</h3>"}})().then((e=>{n.setFieldValue("content",e),t.current&&(t.current.innerHTML=e)})),n.values.content)),[]);(0,s.useEffect)((()=>{t.current&&(t.current.innerHTML=h)}),[]);const m=(0,i.A)(n);return(0,d.jsx)("div",{style:{position:"relative"},children:(0,d.jsxs)("form",{onSubmit:n.handleSubmit,children:[(0,d.jsx)("div",{ref:t,className:"post-it sticky-notes",contentEditable:!0,suppressContentEditableWarning:!0,onInput:e=>{const t=e.target.innerHTML;n.setFieldValue("content",t)}}),(0,d.jsx)(r.A,{"aria-label":"mic",style:{position:"absolute",top:"15px",right:"10px"},onClick:()=>m("content"),children:(0,d.jsx)(o.A,{})}),(0,d.jsx)(r.A,{type:"submit","aria-label":"submit",style:{position:"absolute",bottom:"15px",right:"10px"},children:(0,d.jsx)(a.A,{})})]})})}const m=s.memo(h)}}]);